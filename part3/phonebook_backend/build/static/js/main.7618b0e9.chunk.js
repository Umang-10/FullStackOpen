(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),a=t(3),o=t(5),u=t(2),i=t(4),s=t.n(i),d="http://localhost:3001/api/persons",l=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},b=function(e,n){return s.a.delete("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),m=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"success",children:n})},O=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"error",children:n})},v=function(e){var n=e.person,t=e.handleDelete;return Object(f.jsxs)("div",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:t,children:"Delete"})]},n.id)},p=function(e){var n=e.handleChange;return Object(f.jsxs)("div",{children:["Filter shown with: ",Object(f.jsx)("input",{onChange:n})]})},x=function(e){var n=e.handleNameChange,t=e.handleNumberChange,c=e.addName;return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{onSubmit:c,children:[Object(f.jsxs)("div",{children:["Name: ",Object(f.jsx)("input",{onChange:n})]}),Object(f.jsxs)("div",{children:["Number: ",Object(f.jsx)("input",{onChange:t})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Add"})})]})})},g=function(e){var n=e.personToShow,t=e.setPersons,c=e.setErrorMessage;return Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsx)(v,{person:e,handleDelete:function(){return function(e){var r=n.find((function(n){return n.id===e})),a=Object(o.a)({},r);console.log(a),window.confirm("Do You Really want to delete this name?")&&b(e,a).then((function(c){return t(n.map((function(n){return n.id!==e})))})).catch((function(a){c("Information about ".concat(r.name," has already been removed from the server.")),setTimeout((function(){c(null)}),3e3),t(n.filter((function(n){return n.id!==e})))}))}(e.id)}})}))})},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),i=Object(a.a)(r,2),s=i[0],d=i[1],b=Object(u.useState)(""),v=Object(a.a)(b,2),w=v[0],C=v[1],N=Object(u.useState)(""),S=Object(a.a)(N,2),k=S[0],y=S[1],D=Object(u.useState)(null),T=Object(a.a)(D,2),E=T[0],P=T[1],A=Object(u.useState)(null),B=Object(a.a)(A,2),I=B[0],J=B[1];Object(u.useEffect)((function(){l().then((function(e){c(e)}))}));var L=k?t.filter((function(e){return e.name.toLowerCase()===k.toLowerCase()})):t;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(m,{message:E}),Object(f.jsx)(O,{message:I}),Object(f.jsx)(p,{handleChange:function(e){y(e.target.value)}}),Object(f.jsx)("h2",{children:"Add a New"}),Object(f.jsx)(x,{handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){C(e.target.value)},addName:function(e){e.preventDefault();var n={name:s,number:w,id:t.length+1};if(t.map((function(e){return e.name})).includes(n.name)){window.confirm("".concat(n.name," is already in the PhoneBook, replace the old number with new one?"));var r=t.find((function(e){return e.name===n.name})),a=Object(o.a)(Object(o.a)({},r),{},{number:n.number});h(r.id,a).then((function(e){c(t.map((function(t){return t.name!==n.name?t:e})))})),P("Updated ".concat(n.name)),setTimeout((function(){P(null)}),4e3)}else j(n).then((function(e){c(t.concat(n)),d("")})),P("Added ".concat(n.name)),setTimeout((function(){P(null)}),3e3)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(g,{personToShow:L,setPersons:c,setErrorMessage:J})]})};t(39);r.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7618b0e9.chunk.js.map